% !TEX root = ../main.tex
We presented new features recently implemented in Vampire. They include FOOL: the extension of first-order logic by a first-class boolean sort, \ITE\ and \LETIN\ expressions, and polymorphic arrays. Vampire implements FOOL by translating FOOL formulas into FOL formulas. We described how this translation is done for each of the new features. Furthermore, we described a modification of the superposition calculus by FOOL paramodulation that makes Vampire reasoning in FOOL more efficient. 
We also gave a simple extension to FOOL that allows one to express the next state relation of a program as a boolean formula which is linear in the size of the program.

Neither FOOL nor polymorphic arrays can be expressed in TFF0. In order to support them Vampire uses a modification of the TFF0 syntax with the following features:

\begin{enumerate}
  \item the boolean sort \tptpo\ can be used as the sort of arguments and quantifiers;
  \item boolean variables can be used as formulas, and formulas can be used as boolean arguments;
  \item \ITE\ expressions are represented using a single keyword \dite\ rather than two different keywords \ditet\ and \ditef;
  \item \LETIN\ expressions are represented using a single keyword \dlet\ rather than four different keywords \dlettt, \mbox{\dlettf,} \dletft\ and \dletff;
  \item \darraySymb, \dselect\ and \dstore\ are used to represent arrays of arbitrary types.
\end{enumerate}

Our experimental results have shown that our implementation, and especially FOOL paramodulation, are efficient and can be used to solve hard problems.

Many program analysis problems, problems used in the SMT community, and problems generated by interactive provers, which previously required (sometimes complex) ad hoc translations to first-order logic, can now be understood by Vampire without any translation. Furthermore, Vampire can be used to translate them to the standard TPTP without \ITE\ and \LETIN\ expressions, that is, the format understood by essentially all modern first-order theorem provers and used at recent CASC competitions. One should simply use \texttt{--mode preprocess} and Vampire will output the translated problem to \texttt{stdout} in the TPTP syntax. 

The translation to FOL described here is only the first step to the efficient handling of FOOL. It can be considerably improved. For example, the translation of \LETIN\ expressions always introduces a fresh function symbol together with a definition for it, whereas in some cases inlining the function would produce smaller clauses. Development of a better translation of FOOL is an important future work.

FOOL can be regarded as the smallest superset of the SMT-LIB~2 Core language and TFF0. A native implementation of an SMT-LIB parser in Vampire is an interesting future work. Note that such an implementation can also be used to translate SMT-LIB to FOOL or to FOL.

Another interesting future work is extending FOOL to handle polymorphism and implementing it in Vampire. This would allow us to parse and prove problems expressed in the TFF1~\cite{tff1} syntax. Note that the current usage of \darraySymb\ conforms with the TFF1 syntax for type constructors.
